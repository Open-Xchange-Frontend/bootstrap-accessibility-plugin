/*! bootstrap-accessibility-plugin - v1.0.2 - 2014-08-26
* https://github.com/paypal/bootstrap-accessibility-plugin
* Copyright (c) 2014 PayPal Accessibility Team; Licensed BSD */
!function($){"use strict";function a11yDropdown(){var toggle=this,root=toggle.parent(),menu=root.find("ul"),items=menu.find("li");return toggle.attr({"aria-haspopup":!0,"aria-expanded":!1}),menu.attr({role:"menu"}),items.attr({role:"presentation"}).find("a").attr({role:"menuitem",tabIndex:"-1"}),root.on({"shown.bs.dropdown":function(){toggle.attr({"aria-expanded":"true"}),setTimeout(function(){$("[role=menuitem]:visible:first",menu).focus()},200)},"hidden.bs.dropdown":function(){toggle.attr("aria-expanded","false")}}),this}var uniqueId=function(prefix){return(prefix||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)},removeMultiValAttributes=function(el,attr,val){var describedby=(el.attr(attr)||"").split(/\s+/),index=$.inArray(val,describedby);-1!==index&&describedby.splice(index,1),describedby=$.trim(describedby.join(" ")),describedby?el.attr(attr,describedby):el.removeAttr(attr)},alertConstructor=$.fn.dropdown.Constructor,alertFn=$.fn.dropdown;$.fn.alert=function(){return $(this).attr({role:"alert"}),alertFn.apply(this,arguments)},$.fn.alert.Constructor=alertConstructor;var showTooltip=$.fn.tooltip.Constructor.prototype.show,hideTooltip=$.fn.tooltip.Constructor.prototype.hide;$.fn.tooltip.Constructor.prototype.show=function(){showTooltip.apply(this,arguments);var $tip=this.tip(),tooltipID=$tip.attr("id")||uniqueId("ui-tooltip");$tip.attr({role:"tooltip",id:tooltipID}),this.$element.attr({"aria-describedby":tooltipID})},$.fn.tooltip.Constructor.prototype.hide=function(){return hideTooltip.apply(this,arguments),removeMultiValAttributes(this.$element,"aria-describedby",this.tip().attr("id")),this};var showPopover=$.fn.popover.Constructor.prototype.setContent,hidePopover=$.fn.popover.Constructor.prototype.hide;$.fn.popover.Constructor.prototype.setContent=function(){showPopover.apply(this,arguments);var $tip=this.tip(),tooltipID=$tip.attr("id")||uniqueId("ui-tooltip");$tip.attr({role:"alert",id:tooltipID}),this.$element.attr("aria-describedby",tooltipID).focus()},$.fn.popover.Constructor.prototype.hide=function(){return hidePopover.apply(this,arguments),removeMultiValAttributes(this.$element,"aria-describedby",this.tip().attr("id")),this},$(document).on("focusout.dropdown.data-api",".dropdown-menu",function(){var that=this;setTimeout(function(){$.contains(that,document.activeElement)||$(that).parent().removeClass("open").find("[data-toggle=dropdown]").attr({"aria-expanded":!1})},150)}).on("keydown.bs.dropdown.data-api","[data-toggle=dropdown], [role=menu], [role=listbox]",function(e){32==e.which&&$(this).click()});var dropdownConstructor=$.fn.dropdown.Constructor,dropdownFn=$.fn.dropdown;$.fn.dropdown=function(){return dropdownFn.apply(this,arguments),a11yDropdown.apply(this)},$.fn.dropdown.Constructor=dropdownConstructor;var modalShow=($.fn.modal.Constructor.prototype.hide,$.fn.modal.Constructor.prototype.show);$.fn.modal.Constructor.prototype.hide=function(){var modalOpener=this.$element.parent().find('[data-target="#'+this.$element.attr("id")+'"]');modalhide.apply(this,arguments),modalOpener.focus()},$.fn.modal.Constructor.prototype.show=function(){$(".modal-dialog",this).attr({role:"document"}),modalShow.apply(this,arguments)}}(jQuery);